{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export const createGalleryCard = imgCard => {\n  const firstTag = imgCard.tags.split(',')[0].trim().toUpperCase();\n  return `\n  <li class=\"gallery-card\">\n    <a class=\"gallery-link\" href=\"${imgCard.largeImageURL}\"><img class=\"gallery-img\" src=\"${imgCard.webformatURL}\" alt=\"${firstTag}\" width=\"360\" height=\"200\" title=\"Beautiful Image\" /></a>\n   <ul class=\"inform-list\">\n              <li class=\"inform\">\n                <h3 class=\"inform-title\">Likes:</h3>\n                <p class=\"inform-text\">${imgCard.likes}</p>\n              </li>\n              <li class=\"inform\">\n                <h3 class=\"inform-title\">Views:</h3>\n                <p class=\"inform-text\">${imgCard.views}</p>\n              </li>\n              <li class=\"inform\">\n                <h3 class=\"inform-title\">Comments:</h3>\n                <p class=\"inform-text\">${imgCard.comments}</p>\n              </li>\n              <li class=\"inform\">\n                <h3 class=\"inform-title\">Downloads:</h3>\n                <p class=\"inform-text\">${imgCard.downloads}</p>\n              </li>\n            </ul>\n            </li>`;\n};\n","import axios from 'axios';\n\nexport const fetchPhotosByQuery = (searchQuery, currentPage) => {\n  const axiosOptions = {\n    params: {\n      key: '48265193-8ac6160565acb44bbb7dfb3fe',\n      q: searchQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      page: currentPage,\n      per_page: 15,\n      safesearch: true,\n    },\n  };\n  return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n","import SimpleLightbox from 'simplelightbox';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { createGalleryCard } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\nconst searchForm = document.querySelector('.input-search');\nconst galleryElem = document.querySelector('.gallery-list');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.btn-load');\n\nloader.style.display = 'none';\n\nconst simpleLight = new SimpleLightbox('.gallery-list a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n  scrollZoom: false,\n});\nlet page = 1;\nlet searchQuery = '';\n\nloadMoreBtn.classList.add('is-hidden');\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n    searchQuery = event.currentTarget.elements.input.value.trim();\n    if (searchQuery === '') {\n      iziToast.error({\n        title: 'Ошибка',\n        message: 'Поле должно быть заполнено!',\n        position: 'bottomRight',\n        closeOnClick: true,\n      });\n      return;\n    }\n    galleryElem.innerHTML = '';\n    loader.style.display = 'flex';\n    page = 1;\n    const { data } = await fetchPhotosByQuery(searchQuery, page);\n\n    if (data.hits.length === 0) {\n      iziToast.error({\n        title: 'Ошибка',\n        message:\n          'Извините, нет результатов, соответствующих вашему поисковому запросу. Попробуйте еще раз!',\n        position: 'bottomRight',\n        closeOnClick: true,\n      });\n      galleryElem.innerHTML = '';\n      searchForm.reset();\n      loader.style.display = 'none';\n      loadMoreBtn.classList.add('is-hidden');\n      return;\n    }\n    loadMoreBtn.classList.remove('is-hidden');\n\n    if (page >= Math.ceil(data.totalHits / data.hits.length)) {\n      iziToast.error({\n        color: 'blue',\n        title: '',\n        message: 'Сожалеем, но больше нет информации по Вашему запросу!',\n        position: 'topRight',\n        closeOnClick: true,\n      });\n      loadMoreBtn.classList.add('is-hidden');\n    }\n    // if (page >= data.totalHits) {\n    //   iziToast.error({\n    //     color: 'blue',\n    //     title: '',\n    //     message: 'Сожалеем, но больше нет информации по Вашему запросу!',\n    //     position: 'topRight',\n    //     closeOnClick: true,\n    //   });\n    // }\n    const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n    galleryElem.innerHTML = galleryTemplate;\n    searchForm.reset();\n    loader.style.display = 'none';\n    loadMoreBtn.addEventListener('click', loadMoreBtnClick);\n    simpleLight.refresh();\n  } catch (err) {\n    if (err.message === 'Network Error') {\n      iziToast.error({\n        title: 'Ошибка',\n        message: 'Ошибка загрузки изображений. Попробуйте снова.',\n        position: 'bottomRight',\n        closeOnClick: true,\n      });\n    }\n  }\n};\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nconst loadMoreBtnClick = async event => {\n  loader.style.display = 'flex';\n  try {\n    page++;\n    const { data } = await fetchPhotosByQuery(searchQuery, page);\n    if (data.hits.length === 0) {\n      iziToast.error({\n        color: 'blue',\n        title: '',\n        message: 'Сожалеем, но больше нет информации по Вашему запросу!',\n        position: 'topRight',\n        closeOnClick: true,\n      });\n      loadMoreBtn.classList.add('is-hidden');\n      loader.style.display = 'none';\n      return;\n    }\n    const galleryTemplate = data.hits.map(el => createGalleryCard(el)).join('');\n    galleryElem.insertAdjacentHTML('beforeend', galleryTemplate);\n    loader.style.display = 'none';\n\n    const sizeCard = document.querySelector('.gallery-card');\n    const cardHeight = sizeCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    simpleLight.refresh();\n  } catch (err) {\n    if (err.message === 'Network Error') {\n      iziToast.error({\n        title: 'Ошибка',\n        message: 'Ошибка загрузки изображений. Попробуйте снова.',\n        position: 'bottomRight',\n        closeOnClick: true,\n      });\n    }\n  }\n};\n"],"names":["createGalleryCard","imgCard","firstTag","fetchPhotosByQuery","searchQuery","currentPage","axiosOptions","axios","searchForm","galleryElem","loader","loadMoreBtn","simpleLight","SimpleLightbox","page","onSearchFormSubmit","event","iziToast","data","galleryTemplate","el","loadMoreBtnClick","err","cardHeight"],"mappings":"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"}